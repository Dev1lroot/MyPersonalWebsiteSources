{
  "version": 3,
  "sources": ["../../@seregpie/three.text-texture/index.js", "../../@seregpie/three.text-sprite/index.js"],
  "sourcesContent": ["!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e(require(\"three\")):\"function\"==typeof define&&define.amd?define([\"three\"],e):((t=\"undefined\"!=typeof globalThis?globalThis:t||self).THREE=t.THREE||{},t.THREE.TextTexture=e(t.THREE))}(this,(function(t){\"use strict\";let e=class extends t.Texture{constructor(){super(document.createElement(\"canvas\"));let e=null,i=()=>e||(e=this.createDrawable()),n=()=>i().width,o=()=>i().height,r=!0,l=1,a=()=>t.MathUtils.ceilPowerOfTwo(n()*l),s=()=>t.MathUtils.ceilPowerOfTwo(o()*l),h=t=>{if(l!==t){let e=a(),i=s();l=t;let n=a(),o=s();n===e&&o===i||(r=!0)}},c=(()=>{let e=new t.Vector3,i=new t.Vector2,r=new t.Vector3,l=new t.Vector3,a=new t.Vector2;return(s,h,c)=>{if(a.set(n(),o()),a.x&&a.y){s.getWorldPosition(r),c.getWorldPosition(e);let n=r.distanceTo(e);if(c.isPerspectiveCamera&&(n*=2*Math.tan(t.MathUtils.degToRad(c.fov)/2)),(c.isPerspectiveCamera||c.isOrthographicCamera)&&(n/=c.zoom),n){var f,d;s.getWorldScale(l);let t=null!==(f=null===(d=h.capabilities)||void 0===d?void 0:d.maxTextureSize)&&void 0!==f?f:1/0;return h.getDrawingBufferSize(i),Math.min(Math.max(l.x/n*(i.x/a.x),l.y/n*(i.y/a.y)),t/a.x,t/a.y)}}return 0}})();Object.defineProperties(this,{width:{get:n},height:{get:o},pixelRatio:{get:()=>l,set:h},needsRedraw:{set(t){t&&(r=!0,e=null)}}}),Object.assign(this,{redraw(){if(r){let t=this.image,e=t.getContext(\"2d\");e.clearRect(0,0,t.width,t.height),t.width=a(),t.height=s(),t.width&&t.height?(e.save(),e.scale(t.width/n(),t.height/o()),((...t)=>{i().draw(...t)})(e),e.restore()):t.width=t.height=1,r=!1,this.needsUpdate=!0}},setOptimalPixelRatio(...t){h(c(...t))}})}};e.prototype.isDynamicTexture=!0;let i=class extends e{constructor({alignment:t=\"center\",backgroundColor:e=\"rgba(0,0,0,0)\",color:i=\"#fff\",fontFamily:n=\"sans-serif\",fontSize:o=16,fontStyle:r=\"normal\",fontVariant:l=\"normal\",fontWeight:a=\"normal\",lineGap:s=1/4,padding:h=.5,strokeColor:c=\"#fff\",strokeWidth:f=0,text:d=\"\"}={}){super(),Object.entries({alignment:t,backgroundColor:e,color:i,fontFamily:n,fontSize:o,fontStyle:r,fontVariant:l,fontWeight:a,lineGap:s,padding:h,strokeColor:c,strokeWidth:f,text:d}).forEach((([t,e])=>{Object.defineProperty(this,t,{get:()=>e,set(t){e!==t&&(e=t,this.needsRedraw=!0)}})}))}get lines(){let{text:t}=this;return t?t.split(\"\\n\"):[]}get font(){return function(t,e,i,n,o){let r=document.createElement(\"span\");return r.style.font=\"1px serif\",r.style.fontFamily=t,r.style.fontSize=\"\".concat(e,\"px\"),r.style.fontStyle=i,r.style.fontVariant=n,r.style.fontWeight=o,r.style.font}(this.fontFamily,this.fontSize,this.fontStyle,this.fontVariant,this.fontWeight)}checkFontFace(){try{let{font:t}=this;return document.fonts.check(t)}catch{}return!0}async loadFontFace(){try{let{font:t}=this;await document.fonts.load(t)}catch{}}createDrawable(){let{alignment:t,backgroundColor:e,color:i,font:n,fontSize:o,lineGap:r,lines:l,padding:a,strokeColor:s,strokeWidth:h}=this;a*=o,r*=o,h*=o;let c=l.length,f=o+r,d=c?(()=>{let t=document.createElement(\"canvas\").getContext(\"2d\");return t.font=n,Math.max(...l.map((e=>t.measureText(e).width)))})():0,g=a+h/2,u=d+2*g;return{width:u,height:(c?o+f*(c-1):0)+2*g,draw(r){let a;r.fillStyle=e,r.fillRect(0,0,r.canvas.width,r.canvas.height);let c=g+o/2;Object.assign(r,{fillStyle:i,font:n,lineWidth:h,miterLimit:1,strokeStyle:s,textAlign:(()=>{switch(t){case\"left\":return a=g,\"left\";case\"right\":return a=u-g,\"right\"}return a=u/2,\"center\"})(),textBaseline:\"middle\"}),l.forEach((t=>{r.fillText(t,a,c),h&&r.strokeText(t,a,c),c+=f}))}}}};return i.prototype.isTextTexture=!0,i}));\n", "!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t(require(\"three\"),require(\"@seregpie/three.text-texture\")):\"function\"==typeof define&&define.amd?define([\"three\",\"@seregpie/three.text-texture\"],t):((e=\"undefined\"!=typeof globalThis?globalThis:e||self).THREE=e.THREE||{},e.THREE.TextSprite=t(e.THREE,e.THREE.TextTexture))}(this,(function(e,t){\"use strict\";function i(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var r=i(t);let o=class extends e.Sprite{constructor({fontSize:t=1,...i}={},o=new e.SpriteMaterial({depthWrite:!1})){super(o);let a=new r.default({fontSize:t,...i});this.material.map=a}onBeforeRender(e,t,i){let{material:r}=this,{map:o}=r;if(o.checkFontFace()){let{scale:t}=this,{height:r,width:a}=o;a&&r?(t.setX(a).setY(r),o.setOptimalPixelRatio(this,e,i),o.redraw()):t.setScalar(1)}else o.loadFontFace()}dispose(){let{material:e}=this,{map:t}=e;t.dispose(),e.dispose()}};return[\"alignment\",\"backgroundColor\",\"color\",\"fontFamily\",\"fontSize\",\"fontStyle\",\"fontVariant\",\"fontWeight\",\"lineGap\",\"padding\",\"strokeColor\",\"strokeWidth\",\"text\"].forEach((e=>{Object.defineProperty(o.prototype,e,{get(){return this.material.map[e]},set(t){this.material.map[e]=t}})})),o.prototype.isTextSprite=!0,o}));\n"],
  "mappings": "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",
  "names": ["require_three", "e", "i", "t", "n", "o", "r", "l", "a", "s", "h", "c", "require_three", "e", "t", "i", "o", "r"]
}
